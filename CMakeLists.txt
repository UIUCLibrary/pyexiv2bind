cmake_minimum_required(VERSION 3.8)
project(pyexiv2bind)
find_package(PythonInterp REQUIRED)
find_package(PythonLibs)
if (WIN32 AND CMAKE_BUILD_TYPE STREQUAL "Debug")
    set(CMAKE_DEBUG_POSTFIX "d")
endif ()
option(pyexiv2bind_build_exiv2 "Build Exiv2 from source" ON)
option(pyexiv2bind_png "Build supporte for the png format" OFF)
if (pyexiv2bind_build_exiv2)
    include(cmake/external_exiv22.cmake)
else ()
    find_package(EXIV2 REQUIRED)
endif ()
if (SKBUILD)
    message(STATUS "USING SCIKIT BUILD")

    find_package(PythonExtensions REQUIRED)

else ()
    include(cmake/build_python_module.cmake)

endif ()

option(pyexiv2bind_build_tests "build test suite" ON)
include_directories(${install_dir}/include)
add_subdirectory(thirdparty/pybind11)
add_subdirectory(py3exiv2bind/core)
enable_testing()
add_subdirectory(tests)
#message(WARNING "CMAKE_DEBUG_POSTFIX = ${CMAKE_DEBUG_POSTFIX}")